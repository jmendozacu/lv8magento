<?php
/**
 * Copyright Â© 2015 Saffron.com. All rights reserved.

 * @author Saffron Team <contact@Saffron.com>
 */
 
if($this->getEnable()):
$banners = $block->getBannerSlider();
?>
<section class="main-video">
     <?php $i = 1; ?>
    <?php foreach ($banners as $banner): ?>
	
	    
	
	<?php $url_image = $this->getMediaFolder().$banner['image']; ?>
	
	<?php if(!empty($banner['image_alt'])){?>
	
	
	  <section class="video-bg">
        <!-- Video -->
        <iframe src="https://player.vimeo.com/video/<?php echo $banner['image_alt'];?>?api=1&controls=0&loop=1&background=1&title=0&autoplay=1" width="500" height="281" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen id="video"></iframe>

        <article>
            <img src="<?php echo $url_image;?>" alt="" id="fadeImage">
        </article>
     </section>

        <!-- Sound -->
        <div class="audio">
            <audio id="sound" autoplay>
                <source src="<?php echo $this->getUrl();?>videosound/audioloop10.mp3" type="audio/mpeg">
            </audio>
        </div>
		<div class="audio-video-btns">
			<!-- Audio Button -->
			<div class="audio-button">
				<a href="javascript:void(0)" id="playButton"> 
					<img src="<?php echo $this->getMediaFolder().'images/volume-off.png'?>" alt="volume">
				</a>
			</div>

			<!-- Video Button -->
			<div class="video-button">
				<a href="javascript:void(0)" id="playVideo">
				<img src="<?php echo $this->getMediaFolder().'images/video-play.png'?>" alt="play">
				</a>
				<a href="javascript:void(0)" id="pauseVideo">
					<img src="<?php echo $this->getMediaFolder().'images/video-pause.png'?>" alt="pause"> 
				</a>
			</div>
		</div>
	
	
	
	
	<?php } else {?>
	<div class="front-banner">
        <div class="owl-carousel owl-theme owl-loaded">
	<div class="item"  style="background: url(<?php echo $url_image; ?>)">
                <div class="owl-item-caption">
                 <!--<a href="<?php echo $banner['click_url'] ?>" >  </a>  -->
				 <h1><?php echo $banner['name']; ?></h1>
				
                </div>    
            </div>
		</div>
	</div>
	<?php } ?>
            
        
	<?php $i++; ?>            
    <?php endforeach; ?>     
            
     
   </section>


<!--<div class="pt-banner-container">
   <ul class="ptowl"> 
	<?php $i = 1; ?>
    <?php foreach ($banners as $banner): ?>
		
		<?php $url_image = $this->getMediaFolder().$banner['image']; ?>
            <li>
				<?php if($banner['click_url']): ?>
					<a href="<?php echo $banner['click_url'] ?>" class="pt-url">
				<?php endif; ?>
					<img alt="<?php echo $banner['image_alt'] ?>" src="<?php echo $url_image; ?>"/>
				<?php if($banner['click_url']): ?>
					</a>
				<?php endif; ?>
				
				<div id="pt-banner-caption<?php echo $i; ?>" class="pt-caption pt-banner-caption">
					
					<div class="pt-banner-content ptslider-<?php echo $i?>">
						<?php if($banner['name']): ?><h1 class="pt-title1"><?php echo __($banner['name']) ?></h1><?php endif; ?>
						<?php if($banner['title1']): ?><h2 class="pt-title2" ><?php echo __($banner['title1']) ?></h2><?php endif; ?>
						<?php if($banner['description']): ?><div class="pt-banner-des">
							<p><?php echo __($banner['description']) ?></p>
						</div><?php endif; ?>
						<?php if($banner['title2']): ?><h3 class="pt-title3"><?php echo __($banner['title2']) ?></h3><?php endif; ?>
						<?php if($banner['click_url']):?><a href="<?php echo $banner['click_url'] ?>" class="shopnow"><?php echo __('+ shop now')?></a><?php endif;?>
					</div>	
				</div>				
            </li>
		<?php $i++; ?>            
    <?php //endif; ?>            
    <?php endforeach; ?>            
    </ul>
</div>-->
<script type="text/javascript">
	
	require([
	  "jquery",
	  "owlcarousel/minjs"
	 ], function($,owlCarousel){
		$(document).ready(function(){
			$('.front-banner .owl-carousel').owlCarousel({
			loop:true,
			items:1,
			margin:0,
			nav:true,
			dots:false,
			autoplay: false,
			touchDrag: false,
			mouseDrag: false,
			smartSpeed: 900
       
    }) ;
			
		});
	});
</script>
<?php endif; ?>


<style>
footer.page-footer {
    display: none;
}

small.copyright {
    display: none;
}
.breadcrumbs {
    display: none;
}
</style>









<script type="text/javascript">
    require(['aos'], function (AOS) {
		AOS.init({
                  duration: 1000,
         });	
		
	
	 });
		

</script>	
<script>
    require([
        'jquery',
        'froogaloop'
    ], function ($) {
        $(document).ready(function () {
        var videoButton = document.getElementById("playButton");
		var sound = document.getElementById("sound");
          //alert(sound);
		//videoButton.addEventListener('click', function(){
			$('#playButton').on('click', function(){
			if(sound.paused){
				//console.log(sound);
				//console.log(sound.paused);
				sound.play();
				videoButton.innerHTML='<img src="<?php echo $this->getMediaFolder().'images/volume-on.png'?>">';
			}
			else{
				//alert('+++1');
				console.log(sound+'gihikg');
				//console.log(sound.paused+'gihikg');
				sound.pause();
				videoButton.innerHTML='<img src="<?php echo $this->getMediaFolder().'images/volume-off.png'?>">';
			}
		 });

		var iframeVideo = document.getElementById('video');
		var player = $f(iframeVideo);

		$('#playVideo').hide();

		$('#pauseVideo').click(function(){
			player.api("pause");
			$('#pauseVideo').hide();
			$('#playVideo').show();
			sound.pause();
			videoButton.innerHTML='<img src="<?php echo $this->getMediaFolder().'images/video-off.png'?>">';
			$('#fadeImage').addClass('fade-image');
		});

		$('#playVideo').click(function(){
			player.api("play");
			$('#playVideo').hide();
			$('#pauseVideo').show();
			sound.play();
			 videoButton.innerHTML='<img src="<?php echo $this->getMediaFolder().'images/volume-on.png'?>">';
			$('#fadeImage').removeClass('fade-image');
		});
		$("#pauseVideo").click(function(){
			$(".audio-button").addClass('audio-hide');
		})
		$("#playVideo").click(function(){
			$(".audio-button").removeClass('audio-hide');
		})


		$(window).on("load resize",function(e){
			if ($(window).width() < 768) {
			   $(".main-video iframe").attr("src","https://player.vimeo.com/video/<?php echo $banner['image_alt'];?>?api=1&controls=0&loop=1&background=1&title=0&autoplay=1");
			}
			else{
				$(".main-video iframe").attr("src","https://player.vimeo.com/video/<?php echo $banner['image_alt'];?>?api=1&controls=0&loop=1&background=1&title=0&autoplay=1");
			}
		});
        });
    });
</script>
<style>


.main-video {
  position: relative;
  width: 100vw;
  height: 100vh;
}

.main-video .video-bg {
	position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
    overflow: hidden;
    background: url('<?php echo $url_image;?>');
    background-repeat: no-repeat;
    background-position: center center;
    background-size: cover;
}

.main-video .video-bg iframe {
  width: 100vw;
  height: 56.25vw;
  min-height: 100vh;
  min-width: 177.77vh;
  position: absolute;
  top: 50%;
  left: 50%;
  -webkit-transform: translate(-50%, -50%) scale(1.05);
          transform: translate(-50%, -50%) scale(1.05);
}

.main-video .video-bg article img {
  width: 100%;
  -o-object-fit: cover;
     object-fit: cover;
  height: 100vh;
  z-index: 1;
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  -webkit-transition: 0.8s ease-in-out;
  transition: 0.8s ease-in-out;
}

.main-video .video-bg .fade-image {
  opacity: 1;
}
.main-video .audio-button a {
  cursor: pointer;
  font-size: 40px;
  text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
  color: #fff;
}
.main-video .video-button a {
  cursor: pointer;
  font-size: 40px;
  text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
  color: #fff;
}

.main-video .top-bar {
  z-index: 1;
  width: 100%;
  float: left;
}
.video-button img,
.audio-button img{
    width: 50px;
    height: auto;
}
.audio-video-btns {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    text-align: center;
    margin: 0 auto;
    height: 100%;
    padding-bottom: 30px;
    display: flex;
    display: -webkit-flex;
    justify-content: center;
}
.audio-button, .video-button {
	margin: 0 20px;
    margin-top: auto;
	
}
.audio-button {
    position: absolute;
    left: 0;
    bottom: 28px;
}
.audio-button.audio-hide {
	opacity:0;
}

@media screen and (max-width: 767px) {
  .main-video {
    position: fixed;
    overflow: hidden;
  }
  .main-video .video-bg {
    min-width: 100vw;
    min-height: 100vh;    
  }
  .main-video .video-bg iframe {
    min-width: 177.77vh;
    min-height: 100vh;
    -webkit-transform: translate(-50%, -50%) scale(1.05);
    transform: translate(-50%, -50%) scale(1.05);
  }
  .audio-video-btns  { bottom:50px;}
}

.vedio-desktop, .vedio-desktop iframe {
    height: 100vh;
    width: 100vw;
}
div#player {
	width: 100vw;
	height: 100vh !important;
	max-width: 100vw !important;
	min-width: 100vw;
}
.player .vp-video-wrapper .vp-preview { 
	background-size: cover !important;
}

</style>