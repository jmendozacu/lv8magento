<?php
/**
 * Copyright Â© 2015 Saffron.com. All rights reserved.

 * @author Saffron Team <contact@Saffron.com>
 */
 
if($this->getEnable()):
$banners = $block->getBannerSlider();
?>
<section class="main-video">
     <?php $i = 1; ?>
    <?php foreach ($banners as $banner): ?>
	
	    
	
	<?php $url_image = $this->getMediaFolder().$banner['image']; ?>
	
	<?php if(!empty($banner['image_alt'])){?>
	
	
	  <section class="video-bg">
        <!-- Video -->
        <iframe src="https://player.vimeo.com/video/<?php echo $banner['image_alt'];?>?api=1&controls=0&loop=1&background=1&title=0&autoplay=1" width="500" height="281" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen id="video"></iframe>

        <article >
            <img src="<?php echo $url_image;?>" alt="" id="fadeImage">
            <h1 class="video-front-title"><?php echo $banner['name']; ?></h1>
		</article>
         
     </section>

        <!-- Sound -->
        <!--<div class="audio">
            <audio id="sound" autoplay>
                <source src="<?php echo $this->getUrl();?>videosound/<?php echo $banner['click_url']?>" type="audio/mpeg">
            </audio>
        </div>-->
		<div class="audio-video-btns">
			<!-- Audio Button -->
			<div class="audio-button">
				<a href="javascript:void(0)" id="playButton"> 
					<img src="<?php echo $this->getMediaFolder().'images/volume-off.png'?>" alt="volume">
				</a>
			</div>

			<!-- Video Button -->
			<div class="video-button">
				<a href="javascript:void(0)" id="playVideo">
				<img src="<?php echo $this->getMediaFolder().'images/video-play.png'?>" alt="play">
				</a>
				<a href="javascript:void(0)" id="pauseVideo">
					<img src="<?php echo $this->getMediaFolder().'images/video-pause.png'?>" alt="pause"> 
				</a>
			</div>
		</div>
	
	
	<input type="hidden"  value="<?php echo $banner['click_url']?>" id="click_url_u">
	
	<?php } else {?>
	<div class="front-banner">
        <div class="owl-carousel owl-theme owl-loaded">
	<div class="item"  style="background: url(<?php echo $url_image; ?>)">
                <div class="owl-item-caption">
                 <!--<a href="<?php echo $banner['click_url'] ?>" >  </a>  -->
				 <h1><?php echo $banner['name']; ?></h1>
				
                </div>  
<input type="hidden"  value="<?php echo $banner['click_url']?>" id="click_url_u">
  
            </div>
		</div>
	</div>
	<?php } ?>
            
        
	<?php $i++; ?>            
    <?php endforeach; ?>     
            
     
   </section>



<script type="text/javascript">
	
	require([
	  "jquery",
	  "owlcarousel/minjs"
	 ], function($,owlCarousel){
		$(document).ready(function(){
			$('.front-banner .owl-carousel').owlCarousel({
			loop:true,
			items:1,
			margin:0,
			nav:true,
			dots:false,
			autoplay: false,
			touchDrag: false,
			mouseDrag: false,
			smartSpeed: 900
       
    }) ;
			
		});
	});
</script>
<?php endif; ?>


<style>
footer.page-footer {
    display: none;
}

small.copyright {
    display: none;
}
.breadcrumbs {
    display: none;
}
</style>









<script type="text/javascript">
    require(['aos'], function (AOS) {
		AOS.init({
                  duration: 1000,
         });	
		
	
	 });
		

</script>	
<script>
    require([
        'jquery',
        'froogaloop'
    ], function ($) {
        $(document).ready(function () {
       
   var cli_rl = $('#click_url_u').val();
      
      if(cli_rl !=""){
       var videoButton = document.getElementById("playButton");
		var sound = document.getElementById("sound");
          //alert(sound);
		/*videoButton.addEventListener('click', function(){
			//$('#playButton').addEventListener('click', function(){
			if(sound.paused){
				console.log(sound);
				console.log(sound.paused);
				sound.play();
				videoButton.innerHTML='<img src="<?php echo $this->getMediaFolder().'images/volume-on.png'?>">';
			}else{
				//alert('+++1');
				console.log(sound+'gihikg');
				//console.log(sound.paused+'gihikg');
				sound.pause();
				videoButton.innerHTML='<img src="<?php echo $this->getMediaFolder().'images/volume-off.png'?>">';
			}
		 });*/

		var iframeVideo = document.getElementById('video');
		var player = $f(iframeVideo);

		$('#playVideo').hide();
		
		

		$('#pauseVideo').click(function(){
			player.api("pause");
			$('#pauseVideo').hide();
			$('#playVideo').show();
			$('.video-front-title').addClass('active');
			sound.pause();
			videoButton.innerHTML='<img src="<?php echo $this->getMediaFolder().'images/volume-on.png'?>">';
			$('#fadeImage').addClass('fade-image');
		});

		$('#playVideo').click(function(){
			player.api("play");
			$('#playVideo').hide();
			$('#pauseVideo').show();
			$('.video-front-title').removeClass('active');
			sound.play();
			 videoButton.innerHTML='<img src="<?php echo $this->getMediaFolder().'images/volume-on.png'?>">';
			$('#fadeImage').removeClass('fade-image');
		});
		$("#pauseVideo").click(function(){
			$(".audio-button").addClass('audio-hide');
		})
		$("#playVideo").click(function(){
			$(".audio-button").removeClass('audio-hide');
		})
		
		$(window).on("load resize",function(e){
			if ($(window).width() < 767) {
			   $(".main-video iframe").attr("src","https://player.vimeo.com/video/<?php echo $banner['title2'];?>?api=1&controls=0&loop=1&background=1&title=0&autoplay=1");
			}
			else{
				$(".main-video iframe").attr("src","https://player.vimeo.com/video/<?php echo $banner['image_alt'];?>?api=1&controls=0&loop=1&background=1&title=0&autoplay=1");
			}
		});

  }
        });
    });
</script>


